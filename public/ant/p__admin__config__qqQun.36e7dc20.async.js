(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{nm0N:function(e,a,t){"use strict";var n=t("tAuX"),l=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("+L6B");var d=l(t("2/Rp"));t("DZo9");var i=l(t("8z0m"));t("5NDa");var r=l(t("5rEg"));t("IzEo");var u=l(t("bx4M"));t("Pwec");var o=l(t("CtXQ")),s=l(t("p0pE")),f=l(t("2Taf")),c=l(t("vZ4D")),p=l(t("l4Ni")),m=l(t("ujKo")),g=l(t("MhPg"));t("miYZ");var h=l(t("tsqr"));t("y8nQ");var v=l(t("Vl3Y")),b=n(t("q1tI")),y=t("y1Nh"),E=t("MuoO"),A=l(t("QyDL")),M=t("Y2fQ"),V=function(e,a,t,n){var l,d=arguments.length,i=d<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,a,t,n);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(i=(d<3?l(i):d>3?l(a,t,i):l(a,t))||i);return d>3&&i&&Object.defineProperty(a,t,i),i},j=v.default.Item,x=function(e){return Object.keys(e).map(function(a){return e[a]}).join(",")};function O(e,a){var t=new FileReader;t.addEventListener("load",function(){return a(t.result)}),t.readAsDataURL(e)}function U(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||h.default.error("You can only upload JPG/PNG file!");var t=e.size/1024/1024<2;return t||h.default.error("Image must smaller than 2MB!"),a&&t}var w=function(e){function a(){var e;return(0,f.default)(this,a),e=(0,p.default)(this,(0,m.default)(a).apply(this,arguments)),e.state={updateModalVisible:!1,formValues:{},updateFormValues:{id:0,value:""},loading:!1,imageUrl:""},e.columns=[{title:(0,M.formatMessage)({id:"Name"}),dataIndex:"name"},{title:"\u503c",dataIndex:"value"},{title:(0,M.formatMessage)({id:"Handle"}),render:function(a,t){return b.default.createElement(b.Fragment,null,b.default.createElement("a",{onClick:function(){return e.handleUpdateModalVisible(!0,t)}},(0,M.formatMessage)({id:"Edit"})))}}],e.handleStandardTableChange=function(a,t,n){var l=e.props.dispatch,d=e.state.formValues,i=Object.keys(t).reduce(function(e,a){var n=(0,s.default)({},e);return n[a]=x(t[a]),n},{}),r=(0,s.default)({currentPage:a.current,pageSize:a.pageSize},d,i);n.field&&(r.sorter="".concat(n.field,"_").concat(n.order)),l({type:"adminAndconfigAndindex/fetch",payload:r})},e.handleUpdateModalVisible=function(a,t){e.setState({updateModalVisible:!!a,updateFormValues:t||{id:0,value:""}})},e.handleUpdate=function(a){var t=e.props.dispatch;t({type:"adminAndconfigAndindex/update",payload:a}),e.handleUpdateModalVisible()},e.handleSubmit=function(a){var t=e.props,n=t.adminAndconfigAndindex.data,l=t.dispatch,d=t.form;a.preventDefault(),d.validateFieldsAndScroll(function(e,a){e||Object.keys(a).forEach(function(e){a[e]!==n.list[e].value&&l({type:"adminAndconfigAndindex/update",payload:{id:e,value:a[e]}})})})},e.handleChange=function(a){if("uploading"!==a.file.status){if("done"===a.file.status){O(a.file.originFileObj,function(a){return e.setState({imageUrl:a,loading:!1})});var t=e.props.dispatch;t({type:"adminAndconfigAndindex/update",payload:{id:153,value:a.file.response.url}})}}else e.setState({loading:!0})},e}return(0,g.default)(a,e),(0,c.default)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"adminAndconfigAndindex/fetch"})}},{key:"render",value:function(){var e=this.props,a=e.adminAndconfigAndindex.data,t=e.form.getFieldDecorator,n=this.state,l=n.updateModalVisible,s=n.updateFormValues,f={handleUpdateModalVisible:this.handleUpdateModalVisible,handleUpdate:this.handleUpdate},c={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}},p={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};if(0===a.list.length)return b.default.createElement(y.PageHeaderWrapper,null);var m=b.default.createElement("div",null,b.default.createElement(o.default,{type:this.state.loading?"loading":"plus"}),b.default.createElement("div",{className:"ant-upload-text"},"Upload")),g=this.state.imageUrl?this.state.imageUrl:a.list[153].value,h=void 0===localStorage.getItem("token")?"":"Bearer ".concat(localStorage.getItem("token"));return b.default.createElement(y.PageHeaderWrapper,null,b.default.createElement(u.default,{bordered:!1},b.default.createElement(v.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},b.default.createElement(j,Object.assign({},c,{label:"".concat((0,M.formatMessage)({id:"Article"})," ID")}),t("150",{rules:[{required:!0}],initialValue:a.list[150].value})(b.default.createElement(r.default,null))),b.default.createElement(j,Object.assign({},c,{label:(0,M.formatMessage)({id:"QQ group number"})}),t("151",{rules:[{required:!0}],initialValue:a.list[151].value})(b.default.createElement(r.default,null))),b.default.createElement(j,Object.assign({},c,{label:(0,M.formatMessage)({id:"QQ group code"})}),t("152",{rules:[{required:!0}],initialValue:a.list[152].value})(b.default.createElement(r.default,null))),b.default.createElement(j,Object.assign({},c,{label:(0,M.formatMessage)({id:"QQ group QR code"})}),b.default.createElement(i.default,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/configs/uploadQqQunOrCode",beforeUpload:U,onChange:this.handleChange,headers:{Authorization:h}},g?b.default.createElement("img",{src:g,alt:"file",style:{width:"100%"}}):m)),b.default.createElement(j,Object.assign({},p,{style:{marginTop:32}}),b.default.createElement(d.default,{type:"primary",htmlType:"submit"},(0,M.formatMessage)({id:"Submit"}))))),b.default.createElement(A.default,Object.assign({},f,{updateModalVisible:l,updateFormValues:s})))}}]),a}(b.Component);w=V([(0,E.connect)(function(e){var a=e.adminAndconfigAndindex,t=e.loading;return{adminAndconfigAndindex:a,loading:t.models.adminAndconfigAndindex}})],w);var Q=v.default.create()(w);a.default=Q}}]);